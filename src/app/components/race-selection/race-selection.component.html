<p-card>
    <ng-template pTemplate="title">Passo 1: Escolha sua Raça</ng-template>
    
    <div class="field mb-4">
        <label class="block mb-2 font-semibold">Raça</label>
        <p-dropdown [options]="races" [ngModel]="selectedRace" (ngModelChange)="raceChange.emit($event)"
            optionLabel="name" placeholder="-- Escolha uma Raça --" [showClear]="true"
            styleClass="w-full"></p-dropdown>
    </div>
    
    <div *ngIf="selectedRace as race" class="mt-4 p-4 border rounded-lg bg-gray-50 text-sm space-y-2">
        <p class="italic">{{ race.description }}</p>
        <p><strong class="font-semibold text-red-700">Aumento de Atributo:</strong>
            <span *ngFor="let inc of race.abilityScoreIncrease | keyvalue; let last = last">{{ inc.key | titlecase }} +{{ inc.value }}{{ last ? '' : ', ' }}</span>
        </p>
        <p><strong class="font-semibold text-red-700">Deslocamento:</strong> {{ race.speed }}m</p>
        <p *ngIf="race.languages?.length"><strong class="font-semibold text-red-700">Idiomas:</strong> {{ race.languages?.join(', ') }}</p>
        <div *ngIf="race.traits?.length">
            <strong class="font-semibold text-red-700">Traços Raciais:</strong>
            <ul class="list-disc list-inside ml-4">
                <li *ngFor="let trait of race.traits">{{ trait.name }} - {{ trait.description }}</li>
            </ul>
        </div>
    </div>

    <div *ngIf="selectedRace && selectedRace.subraces && selectedRace.subraces.length > 0" class="field my-4">
        <label class="block mb-2 font-semibold">Sub-raça</label>
        <p-dropdown [options]="selectedRace.subraces" [ngModel]="selectedSubrace" (ngModelChange)="subraceChange.emit($event)" optionLabel="name"
            placeholder="-- Escolha uma Sub-raça --" [showClear]="true" styleClass="w-full"></p-dropdown>
    </div>
    
    <div *ngIf="selectedSubrace as subrace" class="mt-4 p-4 border rounded-lg bg-gray-50 text-sm space-y-2">
        <p class="italic">{{ subrace.description }}</p>
        <p *ngIf="subrace.abilityScoreIncrease"><strong class="font-semibold text-red-700">Aumento Adicional:</strong>
            <span *ngFor="let inc of subrace.abilityScoreIncrease | keyvalue; let last = last">{{ inc.key | titlecase }} +{{ inc.value }}{{ last ? '' : ', ' }}</span>
        </p>
        <div *ngIf="subrace.traits?.length">
            <strong class="font-semibold text-red-700">Traços de Sub-raça:</strong>
            <ul class="list-disc list-inside ml-4">
                <li *ngFor="let trait of subrace.traits">{{ trait.name }} - {{ trait.description }}</li>
            </ul>
        </div>
    </div>
</p-card>